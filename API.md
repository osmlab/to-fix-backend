# API Docs

## Auth

All `put` endpoints require authentication.

## Endpoints

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### get-status

Get the server status.

**Examples**

```javascript
curl https://host

{
  status: 'OK'
}
```

### get-projects

Get a list of projects.

**Examples**

```javascript
curl https://host/projects

[
  {
    id: '00000000-0000-0000-0000-000000000000',
    name: 'My Project',
    metadata: {},
    createdAt: '2017-10-18T00:00:00.000Z',
    updatedAt: '2017-10-18T00:00:00.000Z'
  }
]
```

### get-items

Get a paginated list of items for a project.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request URL parameters
    -   `params.project` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The project ID
-   `query` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request URL query parameters
    -   `query.lock` **(`"locked"` \| `"unlocked"`)** The item's lock status, must be 'locked' or 'unlocked' (optional, default `'locked'`)
    -   `query.page` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The pagination start page (optional, default `0`)
    -   `query.page_size` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The page size (optional, default `100`)

**Examples**

```javascript
curl https://host/projects/:project/items

[
  {
    status: 'open',
    lockedTill: '2017-10-19T00:00:00.000Z',
    siblings: [],
    metadata: {},
    id: '405270',
    project_id: '00000000-0000-0000-0000-000000000000',
    pin: {
      type: 'Point',
      coordinates: [0, 0]
    },
    instructions: 'Fix this item',
    featureCollection: {
      type: 'FeatureCollection',
      features: []
    },
    createdBy: 'user',
    updatedAt: '2017-10-19T00:00:00.000Z',
    createdAt: '2017-10-19T00:00:00.000Z',
    lockedBy: null
  }
]
```

### create-project

Create a project.

**Parameters**

-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request body
    -   `body.name` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The project name
    -   `body.metadata` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The project metadata (optional, default `{}`)

**Examples**

```javascript
curl -X POST -H "Content-Type: application/json" -d '{"name":"My Project"}' https://host/projects

{
  id: '00000000-0000-0000-0000-000000000000',
  metadata: {},
  name: 'My Project',
  updatedAt: '2017-10-19T00:00:00.000Z',
  createdAt: '2017-10-19T00:00:00.000Z'
}
```

### get-project

Get a project.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request URL parameters
    -   `params.project` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The project ID

**Examples**

```javascript
curl https://host/projects/00000000-0000-0000-0000-000000000000

{
  id: '00000000-0000-0000-0000-000000000000',
  name: 'My Project',
  metadata: {},
  createdAt: '2017-10-18T00:00:00.000Z',
  updatedAt: '2017-10-18T00:00:00.000Z'
}
```

### updateProject

Update a project.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request URL parameters
    -   `params.project` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The project ID
-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request body

**Examples**

```javascript
curl -X PUT -H "Content-Type: application/json" -d '{"metadata":{"key":"value"}}' https://host/projects/00000000-0000-0000-0000-000000000000

{
  id: '00000000-0000-0000-0000-000000000000',
  name: 'My Project',
  metadata: {
    key: "value"
  },
  createdAt: '2017-10-18T00:00:00.000Z',
  updatedAt: '2017-10-18T00:00:00.000Z'
}
```

### create-item

Create an item in a project.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request URL parameters
    -   `params.project` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The project ID
-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request body
    -   `body.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** An identifier that can be used in future API requests for the item
    -   `body.instructions` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Instructions on how to work on the item
    -   `body.pin` **\[Lon, Lat]** A 2D geometry point to represent the feature
    -   `body.lock` **(`"unlocked"` \| `"locked"`)?** The item's lock status
    -   `body.status` **(`"open"` \| `"fixed"` \| `"noterror"`)?** The item's status
    -   `body.featureCollection` **FeatureCollection?** The item's featureCollection context

**Examples**

```javascript
curl \
-X POST \
-H "Content-Type: application/json" \
-d '{"id":"405270","instructions":"Fix this item","pin":[0,0]}' \
https://host/projects/00000000-0000-0000-0000-000000000000/items

{
  status: 'open',
  lockedTill: '2017-10-19T00:00:00.000Z',
  siblings: [],
  metadata: {},
  id: '405270',
  project_id: '00000000-0000-0000-0000-000000000000',
  pin: {
    type: 'Point',
    coordinates: [0, 0]
  },
  instructions: 'Fix this item',
  featureCollection: {
    type: 'FeatureCollection',
    features: []
  },
  createdBy: 'user',
  updatedAt: '2017-10-19T00:00:00.000Z',
  createdAt: '2017-10-19T00:00:00.000Z',
  lockedBy: null
}
```

### get-project-item

Get an item for a project.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request URL parameters
    -   `params.project` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The project ID
    -   `params.item` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The item ID

**Examples**

```javascript
curl https://host/projects/00000000-0000-0000-0000-000000000000/items/405270

{
  status: 'open',
  lockedTill: '2017-10-19T00:00:00.000Z',
  siblings: [],
  metadata: {},
  id: '405270',
  project_id: '00000000-0000-0000-0000-000000000000',
  pin: {
    type: 'Point',
    coordinates: [0,0]
  },
  instructions: 'Fix this item',
  featureCollection: {
    type: 'FeatureCollection',
    features: []
  },
  createdBy: 'user',
  updatedAt: '2017-10-19T00:00:00.000Z',
  createdAt: '2017-10-19T00:00:00.000Z',
  lockedBy: null
}
```

### update-item

Update a project item.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request URL parameters
    -   `params.project` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The project ID
    -   `params.item` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The item ID
-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The request body
    -   `body.lock` **(`"unlocked"` \| `"locked"`)?** The item's lock status
    -   `body.pin` **\[Lon, Lat]?** A 2D geometry point to represent the feature
    -   `body.status` **(`"open"` \| `"fixed"` \| `"noterror"`)?** The item's status
    -   `body.featureCollection` **FeatureCollection?** The item's featureCollection context
    -   `body.instructions` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Instructions on how to work on the item

**Examples**

```javascript
curl \
-X PUT \
-H "Content-Type: application/json" \
-d '{"instructions":"Different instructions for fixing the item"}' \
https://host/projects/00000000-0000-0000-0000-000000000000/items/405270

{
  status: 'open',
  lockedTill: '2017-10-19T00:00:00.000Z',
  siblings: [],
  metadata: {},
  id: '405270',
  project_id: '00000000-0000-0000-0000-000000000000',
  pin: {
    type: 'Point',
    coordinates: [0, 0]
  },
  instructions: 'Different instructions for fixing the item',
  featureCollection: {
    type: 'FeatureCollection',
    features: []
  },
  createdBy: 'user',
  updatedAt: '2017-10-19T00:00:00.000Z',
  createdAt: '2017-10-19T00:00:00.000Z',
  lockedBy: null
}
```

### putItemWrapper

handle all the logic and some validation for item creation and updating

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the opts for the action
    -   `opts.project` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the project the item belongs to
    -   `opts.item` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the item itself
    -   `opts.user` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the user making the change
    -   `opts.featureCollection` **FeatureCollection?** a validated GeoJSON feature collection, required on create
    -   `opts.pin` **Point?** a validated GeoJSON point representing the queryable location of this item, required on create
    -   `opts.instructions` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the instructions for what needs to be done, required on create
    -   `opts.status` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the status to set the item to
    -   `opts.lockedTill` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the time the lock expires at
