# API Docs

## Auth

All `put` endpoints require authentication.

## Endpoints

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### get-status

Get the status of server

**Examples**

```javascript
curl https://host/
 { status: 'OK' }
```

### get-projects

Get a list of projects

**Examples**

```javascript
curl https://host/projects/project-id
 [{
   id: 'one',
   metadata: {}
 }]
```

### put-item

handle all the logic and some validation for item creation and updating

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the opts for the action
    -   `opts.project` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the project the item belongs to
    -   `opts.item` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the item itself
    -   `opts.user` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the user making the change
    -   `opts.featureCollection` **FeatureCollection?** a validated GeoJSON feature collection, required on create
    -   `opts.pin` **Point?** a validated GeoJSON point representing the queryable location of this item, required on create
    -   `opts.instructions` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the instructions for what needs to be done, required on create
    -   `opts.status` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the status to set the item to
    -   `opts.lockedTill` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the time the lock expires at

### get-project-items

Get a paginated list of items for a project

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.project` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the project id
-   `query` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what queryparams are valid
    -   `query.lock` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** if provided this must either be 'unlocked' or 'locked'
    -   `query.page` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** starting page (optional, default `0`)
    -   `query.page_size` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the size of the page (optional, default `constants.PAGE_SIZE`)

**Examples**

```javascript
curl https://host/projects/project-id/items?lock=unlocked
[
  {
    "id": "item-id",
    "project_id": "project-id",
    "lockedTill": "2017-09-01T00:00:00Z"
  }
]
```

### get-project

Get a project

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.project` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the project id

**Examples**

```javascript
curl https://host/projects/project-id
 {
   id: 'one',
   metadata: {}
 }
```

### createProject

**Parameters**

-   `req`  
-   `res`  
-   `next`  

### put-project

Put a project

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.project` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the project id
-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the body of request
    -   `body.metadata` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** a flexible object for adding metadata

**Examples**

```javascript
curl -X PUT -H "Content-Type: application/json" -d \
 '{"metadata": {} }' \
  https://host/projects/project-id
```

### get-project-item

Get an item from a project

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.project` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the project id
    -   `params.item` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the item id

**Examples**

```javascript
curl https://host/projects/project-id/items/item-id
  {
    "id": "item-id",
    "project_id": "project-id",
    "lockedTill": "2017-09-01T00:00:00Z"
  }
```

### deleteProject

**Parameters**

-   `req`  
-   `res`  
-   `next`  

### createItem

**Parameters**

-   `req`  
-   `res`  
-   `next`  

### put-project-item

Put an item in a project

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.project` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the project id
    -   `params.item` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the item id
-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the body of the request
    -   `body.lock` **(`"unlocked"` \| `"locked"`)?** lock
    -   `body.pin` **\[Lon, Lat]?** a 2d geometry point to represent the feature
    -   `body.status` **(`"open"` \| `"fixed"` \| `"noterror"`)?** the status of current item
    -   `body.featureCollection` **FeatureCollection?** featureCollection
    -   `body.instructions` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** instructions on how to work on the item

**Examples**

```javascript
Change the lock to unlocked for `item-id` in `project-id`
curl -X PUT -H "Content-Type: application/json" -d \
'{"lock":"unlocked"}' \
https://host/projects/project-id/items/item-id
```

```javascript
Change the status to fixed for `item-id` in `project-id`
curl -X PUT -H "Content-Type: application/json" -d \
'{"status":"fixed"}' \
https://host/projects/project-id/items/item-id
```

```javascript
Change the pin for `item-id` in `project-id`
curl -X PUT -H "Content-Type: application/json" -d \
'{"pin": [20.0212, 71.01212]}' \
https://host/projects/project-id/items/item-id
```

```javascript
Change the featureCollection for `item-id` in `project-id`
curl -X PUT -H "Content-Type: application/json" -d \
'{"featureCollection": {type: "FeatureCollection", "features": []}}' \
https://host/projects/project-id/items/item-id
```

```javascript
Change the instructions for `item-id` in `project-id`
curl -X PUT -H "Content-Type: application/json" -d \
'{"instructions": "Filler instruction"' \
https://host/projects/project-id/items/item-id
```

### deleteItem

**Parameters**

-   `req`  
-   `res`  
-   `next`  
